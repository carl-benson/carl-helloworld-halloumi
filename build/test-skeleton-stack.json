{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Conditions": {
    "SkeletonFalse": {
      "Fn::Equals": [
        "true",
        "false"
      ]
    },
    "SkeletonTrue": {
      "Fn::Equals": [
        "true",
        "true"
      ]
    }
  },
  "Description": "HelloWorld,Ec2Stack,SkeletonStack test 6d04a7a62c10800c5715ecf2a51ed211af61f969-dirty",
  "Outputs": {
    "SkeletonInternetGatewayId": {
      "Value": {
        "Ref": "SkeletonInternetGateway"
      }
    },
    "SkeletonRouteTableId": {
      "Value": {
        "Ref": "SkeletonRouteTable"
      }
    },
    "SkeletonVpcId": {
      "Value": {
        "Ref": "SkeletonVpc"
      }
    }
  },
  "Resources": {
    "SkeletonInternetGateway": {
      "Type": "AWS::EC2::InternetGateway"
    },
    "SkeletonRoute": {
      "Properties": {
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "SkeletonInternetGateway"
        },
        "RouteTableId": {
          "Ref": "SkeletonRouteTable"
        }
      },
      "Type": "AWS::EC2::Route"
    },
    "SkeletonRouteTable": {
      "Properties": {
        "VpcId": {
          "Ref": "SkeletonVpc"
        }
      },
      "Type": "AWS::EC2::RouteTable"
    },
    "SkeletonVpc": {
      "Properties": {
        "CidrBlock": "10.0.0.0/16",
        "EnableDnsHostnames": true,
        "EnableDnsSupport": true
      },
      "Type": "AWS::EC2::VPC"
    },
    "SkeletonVpcGatewayAttachment": {
      "Properties": {
        "InternetGatewayId": {
          "Ref": "SkeletonInternetGateway"
        },
        "VpcId": {
          "Ref": "SkeletonVpc"
        }
      },
      "Type": "AWS::EC2::VPCGatewayAttachment"
    },
    "VpcFlowLogFlowLog": {
      "Properties": {
        "DeliverLogsPermissionArn": {
          "Fn::GetAtt": [
            "VpcFlowLogFlowLogPolicy",
            "Arn"
          ]
        },
        "LogGroupName": {
          "Ref": "VpcFlowLogLogGroup"
        },
        "ResourceId": {
          "Ref": "SkeletonVpc"
        },
        "ResourceType": "VPC",
        "TrafficType": "ALL"
      },
      "Type": "AWS::EC2::FlowLog"
    },
    "VpcFlowLogFlowLogPolicy": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": [
                "sts:AssumeRole"
              ],
              "Effect": "Allow",
              "Principal": {
                "Service": "vpc-flow-logs.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "Policies": [
          {
            "PolicyDocument": {
              "Statement": [
                {
                  "Action": [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents",
                    "logs:DescribeLogGroups",
                    "logs:DescribeLogStreams"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ],
              "Version": "2012-10-17"
            },
            "PolicyName": "FlowLogPolicy"
          }
        ]
      },
      "Type": "AWS::IAM::Role"
    },
    "VpcFlowLogLogGroup": {
      "Properties": {
        "LogGroupName": {
          "Fn::Join": [
            "",
            [
              "/aws/vpc/",
              {
                "Fn::Join": [
                  "-",
                  [
                    {
                      "Ref": "AWS::StackName"
                    },
                    "VpcFlowLogs"
                  ]
                ]
              }
            ]
          ]
        },
        "RetentionInDays": 30
      },
      "Type": "AWS::Logs::LogGroup"
    }
  }
}